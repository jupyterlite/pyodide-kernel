diff --git a/lib/service-worker-manager.d.ts b/lib/service-worker-manager.d.ts
index 2504c6764ace42939d07c635792fad75116ff7c8..4cc0f62f26e1b77d4ab6206e963f46440b3f6311 100644
--- a/lib/service-worker-manager.d.ts
+++ b/lib/service-worker-manager.d.ts
@@ -1,8 +1,8 @@
 import { ISignal } from '@lumino/signaling';
-import { TDriveMethod, TDriveRequest } from '@jupyterlite/contents';
 import { IServiceWorkerManager } from './tokens';
 /**
- * A class that manages the Service Worker.
+ * A class that manages the ServiceWorker registration and communication,
+ * used for accessing the file system.
  */
 export declare class ServiceWorkerManager implements IServiceWorkerManager {
     /**
@@ -18,32 +18,38 @@ export declare class ServiceWorkerManager implements IServiceWorkerManager {
      */
     get enabled(): boolean;
     /**
-     * Whether the ServiceWorker is ready or not.
+     * A unique id to identify the browsing context where the ServiceWorkerManager was instantiated.
      */
-    get ready(): Promise<void>;
+    get browsingContextId(): string;
     /**
-     * Handle a message received on the MessageChannel
+     * Whether the ServiceWorker is ready or not.
      */
-    protected _onMessage: <T extends TDriveMethod>(event: MessageEvent<TDriveRequest<T>>) => Promise<void>;
+    get ready(): Promise<void>;
     /**
-     * Initialize the Service Worker
+     * Initialize the ServiceWorkerManager.
      */
     private _initialize;
     /**
-     * Unregister previous service workers if the version has changed.
+     * Unregister old service workers if the version has changed.
      */
     private _unregisterOldServiceWorkers;
     /**
-     * Ping the Service Worker to keep it alive.
+     * Ping the service worker to keep it alive.
      */
     private _pingServiceWorker;
     /**
-     * Set the Service Worker registration.
+     * Set the registration and emit a signal.
      */
     private _setRegistration;
-    private _messageChannel;
+    /**
+     * Handle a message received on the BroadcastChannel
+     */
+    private _onBroadcastMessage;
     private _registration;
     private _registrationChanged;
     private _ready;
+    private _broadcastChannel;
+    private _browsingContextId;
+    private _contents;
     private _driveContentsProcessor;
 }
diff --git a/lib/service-worker-manager.js b/lib/service-worker-manager.js
index 542279ab2ce97254d61b3b223d3fee7ca8caac47..45b4af317f40cd60cf9d14202b13b2fb8608b799 100644
--- a/lib/service-worker-manager.js
+++ b/lib/service-worker-manager.js
@@ -1,18 +1,19 @@
 import { PageConfig, URLExt } from '@jupyterlab/coreutils';
-import { PromiseDelegate } from '@lumino/coreutils';
+import { DRIVE_API_PATH, DriveContentsProcessor, } from '@jupyterlite/contents';
+import { PromiseDelegate, UUID } from '@lumino/coreutils';
 import { Signal } from '@lumino/signaling';
-import { DriveContentsProcessor, } from '@jupyterlite/contents';
 import { WORKER_NAME } from './tokens';
 /**
- * The version of the app.
+ * The version of the app
  */
 const VERSION = PageConfig.getOption('appVersion');
 /**
- * Used to keep the Service Worker alive.
+ * Used to keep the service worker alive
  */
 const SW_PING_ENDPOINT = '/api/service-worker-heartbeat';
 /**
- * A class that manages the Service Worker.
+ * A class that manages the ServiceWorker registration and communication,
+ * used for accessing the file system.
  */
 export class ServiceWorkerManager {
     /**
@@ -21,55 +22,35 @@ export class ServiceWorkerManager {
     constructor(options) {
         var _a;
         /**
-         * Handle a message received on the MessageChannel
+         * Handle a message received on the BroadcastChannel
          */
-        this._onMessage = async (event) => {
-            const request = event.data;
-            const response = await this._driveContentsProcessor.processDriveRequest(request);
-            this._messageChannel.port1.postMessage(response);
-        };
-        /**
-         * Unregister previous service workers if the version has changed.
-         */
-        this._unregisterOldServiceWorkers = async (scriptURL) => {
-            const versionKey = `${scriptURL}-version`;
-            // Check if we have an installed version. If we do, compare it to the current version
-            // and unregister all service workers if they are different.
-            const installedVersion = localStorage.getItem(versionKey);
-            if ((installedVersion && installedVersion !== VERSION) || !installedVersion) {
-                // eslint-disable-next-line no-console
-                console.info('New version, unregistering existing service workers.');
-                const registrations = await navigator.serviceWorker.getRegistrations();
-                await Promise.all(registrations.map((registration) => registration.unregister()));
-                // eslint-disable-next-line no-console
-                console.info('All existing service workers have been unregistered.');
+        this._onBroadcastMessage = async (event) => {
+            if (!this._broadcastChannel || !this._driveContentsProcessor) {
+                return;
             }
-            localStorage.setItem(versionKey, VERSION);
-        };
-        /**
-         * Ping the Service Worker to keep it alive.
-         */
-        this._pingServiceWorker = async () => {
-            const response = await fetch(SW_PING_ENDPOINT);
-            const text = await response.text();
-            if (text === 'ok') {
-                setTimeout(this._pingServiceWorker, 20000);
+            const { data, browsingContextId } = event.data;
+            if (browsingContextId !== this._browsingContextId) {
+                // Message is not meant for us
+                return;
             }
+            const response = await this._driveContentsProcessor.processDriveRequest(data);
+            this._broadcastChannel.postMessage(response);
         };
         this._registration = null;
         this._registrationChanged = new Signal(this);
         this._ready = new PromiseDelegate();
-        this._messageChannel = new MessageChannel();
-        // listen to messages from the Service Worker
-        this._messageChannel.port1.onmessage = this._onMessage;
-        const contents = options.contents;
-        this._driveContentsProcessor = new DriveContentsProcessor({
-            contentsManager: contents,
-        });
-        const workerUrl = (_a = options === null || options === void 0 ? void 0 : options.workerUrl) !== null && _a !== void 0 ? _a : URLExt.join(PageConfig.getBaseUrl(), WORKER_NAME);
+        const workerUrl = (_a = options.workerUrl) !== null && _a !== void 0 ? _a : URLExt.join(PageConfig.getBaseUrl(), WORKER_NAME);
         const fullWorkerUrl = new URL(workerUrl, window.location.href);
         const enableCache = PageConfig.getOption('enableServiceWorkerCache') || 'false';
         fullWorkerUrl.searchParams.set('enableCache', enableCache);
+        // Initialize broadcast channel related properties
+        this._browsingContextId = UUID.uuid4();
+        this._contents = options.contents;
+        this._broadcastChannel = new BroadcastChannel(DRIVE_API_PATH);
+        this._broadcastChannel.addEventListener('message', this._onBroadcastMessage);
+        this._driveContentsProcessor = new DriveContentsProcessor({
+            contentsManager: this._contents,
+        });
         void this._initialize(fullWorkerUrl.href).catch(console.warn);
     }
     /**
@@ -84,6 +65,12 @@ export class ServiceWorkerManager {
     get enabled() {
         return this._registration !== null;
     }
+    /**
+     * A unique id to identify the browsing context where the ServiceWorkerManager was instantiated.
+     */
+    get browsingContextId() {
+        return this._browsingContextId;
+    }
     /**
      * Whether the ServiceWorker is ready or not.
      */
@@ -91,15 +78,13 @@ export class ServiceWorkerManager {
         return this._ready.promise;
     }
     /**
-     * Initialize the Service Worker
+     * Initialize the ServiceWorkerManager.
      */
     async _initialize(workerUrl) {
-        var _a;
         const { serviceWorker } = navigator;
         let registration = null;
         if (!serviceWorker) {
             console.warn('ServiceWorkers not supported in this browser');
-            this._ready.reject(void 0);
             return;
         }
         else if (serviceWorker.controller) {
@@ -123,10 +108,6 @@ export class ServiceWorkerManager {
             }
         }
         this._setRegistration(registration);
-        // transfer the port for communication with the Service Worker
-        void ((_a = serviceWorker.controller) === null || _a === void 0 ? void 0 : _a.postMessage({
-            type: 'INIT_PORT',
-        }, [this._messageChannel.port2]));
         if (!registration) {
             this._ready.reject(void 0);
         }
@@ -136,7 +117,35 @@ export class ServiceWorkerManager {
         }
     }
     /**
-     * Set the Service Worker registration.
+     * Unregister old service workers if the version has changed.
+     */
+    async _unregisterOldServiceWorkers(scriptURL) {
+        const versionKey = `${scriptURL}-version`;
+        // Check if we have an installed version. If we do, compare it to the current version
+        // and unregister all service workers if they are different.
+        const installedVersion = localStorage.getItem(versionKey);
+        if ((installedVersion && installedVersion !== VERSION) || !installedVersion) {
+            // eslint-disable-next-line no-console
+            console.info('New version, unregistering existing service workers.');
+            const registrations = await navigator.serviceWorker.getRegistrations();
+            await Promise.all(registrations.map((registration) => registration.unregister()));
+            // eslint-disable-next-line no-console
+            console.info('All existing service workers have been unregistered.');
+        }
+        localStorage.setItem(versionKey, VERSION);
+    }
+    /**
+     * Ping the service worker to keep it alive.
+     */
+    async _pingServiceWorker() {
+        const response = await fetch(SW_PING_ENDPOINT);
+        const text = await response.text();
+        if (text === 'ok') {
+            setTimeout(this._pingServiceWorker, 20000);
+        }
+    }
+    /**
+     * Set the registration and emit a signal.
      */
     _setRegistration(registration) {
         this._registration = registration;
diff --git a/lib/service-worker-manager.js.map b/lib/service-worker-manager.js.map
index d6fcd6020a56abb3c27c1ef9cbf9fa70f9e8bce2..e553bc9dbfa21d950e00b541576de730e04c72c1 100644
--- a/lib/service-worker-manager.js.map
+++ b/lib/service-worker-manager.js.map
@@ -1 +1 @@
-{"version":3,"file":"service-worker-manager.js","sourceRoot":"","sources":["../src/service-worker-manager.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"service-worker-manager.js","sourceRoot":"","sources":["../src/service-worker-manager.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/lib/service-worker.d.ts b/lib/service-worker.d.ts
index e6d76a8d4e64ed162caaf4fcbb061450fcfca90e..cb79c4b090c4f42fd9b7c0c78d182244e36d7aeb 100644
--- a/lib/service-worker.d.ts
+++ b/lib/service-worker.d.ts
@@ -6,8 +6,7 @@ declare const CACHE = "precache";
 /**
  * Communication channel for drive access
  */
-declare let messagePort: MessagePort;
-declare const ready: Promise<void>;
+declare const broadcast: BroadcastChannel;
 /**
  * Whether to enable the cache
  */
diff --git a/lib/service-worker.js b/lib/service-worker.js
index cc620fb9531b8dc3f08e788de0de5dba562b5e92..ab0dff749d282eadf761fb79a389dcfd0bea1021 100644
--- a/lib/service-worker.js
+++ b/lib/service-worker.js
@@ -8,15 +8,7 @@ const CACHE = 'precache';
 /**
  * Communication channel for drive access
  */
-let messagePort;
-const ready = new Promise((resolve) => {
-    self.addEventListener('message', (event) => {
-        if (event.data && event.data.type === 'INIT_PORT') {
-            messagePort = event.ports[0];
-            resolve();
-        }
-    });
-});
+const broadcast = new BroadcastChannel('/api/drive.v1');
 /**
  * Whether to enable the cache
  */
@@ -120,14 +112,13 @@ function shouldDrop(request, url) {
  * Forward request to main using the broadcast channel
  */
 async function broadcastOne(request) {
-    await ready;
     const promise = new Promise((resolve) => {
-        messagePort.onmessage = (event) => {
+        broadcast.onmessage = (event) => {
             resolve(new Response(JSON.stringify(event.data)));
         };
     });
     const message = await request.json();
-    messagePort.postMessage(message);
+    broadcast.postMessage(message);
     return await promise;
 }
 async function openCache() {
diff --git a/lib/service-worker.js.map b/lib/service-worker.js.map
index 1b9e840faf29633cf98dea6f2dcf5ef482142bb9..d1e41f5a33476e020a66b77759cac357637abdd9 100644
--- a/lib/service-worker.js.map
+++ b/lib/service-worker.js.map
@@ -1 +1 @@
-{"version":3,"file":"service-worker.js","sourceRoot":"","sources":["../src/service-worker.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"service-worker.js","sourceRoot":"","sources":["../src/service-worker.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/lib/tokens.d.ts b/lib/tokens.d.ts
index 1aa18a81b54966381567d45bf82197dea050784d..60c964e9ae498ce91ea6ebc4f805144efad1761e 100644
--- a/lib/tokens.d.ts
+++ b/lib/tokens.d.ts
@@ -1,6 +1,6 @@
-import { Contents } from '@jupyterlab/services';
 import { Token } from '@lumino/coreutils';
 import { ISignal } from '@lumino/signaling';
+import { Contents } from '@jupyterlab/services';
 /**
  * The token for the ServiceWorker.
  */
@@ -17,6 +17,10 @@ export interface IServiceWorkerManager {
      * Whether the ServiceWorker is enabled or not.
      */
     readonly enabled: boolean;
+    /**
+     * A unique id to identify the browsing context where the ServiceWorkerManager was instantiated.
+     */
+    readonly browsingContextId: string;
     /**
      * A Promise that resolves when the ServiceWorker is registered, or rejects if it cannot
      */
@@ -31,7 +35,7 @@ export declare namespace IServiceWorkerManager {
      */
     interface IOptions {
         /**
-         * The JupyterLab contents manager
+         * The contents manager to use for handling drive contents requests
          */
         contents: Contents.IManager;
         /**
diff --git a/lib/tokens.js.map b/lib/tokens.js.map
index 7243c402cd68047ef8130309c874aacbfc175a5b..7eb6293c57a3e9041030e7e59681f90d1d50a070 100644
--- a/lib/tokens.js.map
+++ b/lib/tokens.js.map
@@ -1 +1 @@
-{"version":3,"file":"tokens.js","sourceRoot":"","sources":["../src/tokens.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAI1C,OAAO,MAAM,MAAM,uBAAuB,CAAC;AAE3C;;GAEG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAAG,IAAI,KAAK,CAC5C,2CAA2C,CAC5C,CAAC;AA6CF,MAAM,CAAC,MAAM,WAAW,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC"}
\ No newline at end of file
+{"version":3,"file":"tokens.js","sourceRoot":"","sources":["../src/tokens.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAM1C,OAAO,MAAM,MAAM,uBAAuB,CAAC;AAE3C;;GAEG;AACH,MAAM,CAAC,MAAM,qBAAqB,GAAG,IAAI,KAAK,CAC5C,2CAA2C,CAC5C,CAAC;AAkDF,MAAM,CAAC,MAAM,WAAW,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC"}
\ No newline at end of file
diff --git a/src/service-worker-manager.ts b/src/service-worker-manager.ts
index f057fc3acec1d986ce475dbd3f6593decb1988e4..03231138c009d2e5bba17766e1db6d5a60b3e526 100644
--- a/src/service-worker-manager.ts
+++ b/src/service-worker-manager.ts
@@ -1,51 +1,55 @@
 import { PageConfig, URLExt } from '@jupyterlab/coreutils';
 
-import { PromiseDelegate } from '@lumino/coreutils';
-
-import { ISignal, Signal } from '@lumino/signaling';
+import { Contents } from '@jupyterlab/services';
 
 import {
+  DRIVE_API_PATH,
   DriveContentsProcessor,
-  IDriveContentsProcessor,
   TDriveMethod,
   TDriveRequest,
 } from '@jupyterlite/contents';
 
+import { PromiseDelegate, UUID } from '@lumino/coreutils';
+
+import { ISignal, Signal } from '@lumino/signaling';
+
 import { IServiceWorkerManager, WORKER_NAME } from './tokens';
 
 /**
- * The version of the app.
+ * The version of the app
  */
 const VERSION = PageConfig.getOption('appVersion');
 
 /**
- * Used to keep the Service Worker alive.
+ * Used to keep the service worker alive
  */
 const SW_PING_ENDPOINT = '/api/service-worker-heartbeat';
 
 /**
- * A class that manages the Service Worker.
+ * A class that manages the ServiceWorker registration and communication,
+ * used for accessing the file system.
  */
 export class ServiceWorkerManager implements IServiceWorkerManager {
   /**
    * Construct a new ServiceWorkerManager.
    */
   constructor(options: IServiceWorkerManager.IOptions) {
-    this._messageChannel = new MessageChannel();
+    const workerUrl =
+      options.workerUrl ?? URLExt.join(PageConfig.getBaseUrl(), WORKER_NAME);
+    const fullWorkerUrl = new URL(workerUrl, window.location.href);
+    const enableCache = PageConfig.getOption('enableServiceWorkerCache') || 'false';
+    fullWorkerUrl.searchParams.set('enableCache', enableCache);
 
-    // listen to messages from the Service Worker
-    this._messageChannel.port1.onmessage = this._onMessage;
+    // Initialize broadcast channel related properties
+    this._browsingContextId = UUID.uuid4();
+    this._contents = options.contents;
+    this._broadcastChannel = new BroadcastChannel(DRIVE_API_PATH);
+    this._broadcastChannel.addEventListener('message', this._onBroadcastMessage);
 
-    const contents = options.contents;
     this._driveContentsProcessor = new DriveContentsProcessor({
-      contentsManager: contents,
+      contentsManager: this._contents,
     });
 
-    const workerUrl =
-      options?.workerUrl ?? URLExt.join(PageConfig.getBaseUrl(), WORKER_NAME);
-    const fullWorkerUrl = new URL(workerUrl, window.location.href);
-    const enableCache = PageConfig.getOption('enableServiceWorkerCache') || 'false';
-    fullWorkerUrl.searchParams.set('enableCache', enableCache);
     void this._initialize(fullWorkerUrl.href).catch(console.warn);
   }
 
@@ -67,26 +71,21 @@ export class ServiceWorkerManager implements IServiceWorkerManager {
   }
 
   /**
-   * Whether the ServiceWorker is ready or not.
+   * A unique id to identify the browsing context where the ServiceWorkerManager was instantiated.
    */
-  get ready(): Promise<void> {
-    return this._ready.promise;
+  get browsingContextId(): string {
+    return this._browsingContextId;
   }
 
   /**
-   * Handle a message received on the MessageChannel
+   * Whether the ServiceWorker is ready or not.
    */
-  protected _onMessage = async <T extends TDriveMethod>(
-    event: MessageEvent<TDriveRequest<T>>,
-  ): Promise<void> => {
-    const request = event.data;
-    const response = await this._driveContentsProcessor.processDriveRequest(request);
-
-    this._messageChannel.port1.postMessage(response);
-  };
+  get ready(): Promise<void> {
+    return this._ready.promise;
+  }
 
   /**
-   * Initialize the Service Worker
+   * Initialize the ServiceWorkerManager.
    */
   private async _initialize(workerUrl: string): Promise<void> {
     const { serviceWorker } = navigator;
@@ -95,7 +94,6 @@ export class ServiceWorkerManager implements IServiceWorkerManager {
 
     if (!serviceWorker) {
       console.warn('ServiceWorkers not supported in this browser');
-      this._ready.reject(void 0);
       return;
     } else if (serviceWorker.controller) {
       const scriptURL = serviceWorker.controller.scriptURL;
@@ -123,14 +121,6 @@ export class ServiceWorkerManager implements IServiceWorkerManager {
 
     this._setRegistration(registration);
 
-    // transfer the port for communication with the Service Worker
-    void serviceWorker.controller?.postMessage(
-      {
-        type: 'INIT_PORT',
-      },
-      [this._messageChannel.port2],
-    );
-
     if (!registration) {
       this._ready.reject(void 0);
     } else {
@@ -140,9 +130,9 @@ export class ServiceWorkerManager implements IServiceWorkerManager {
   }
 
   /**
-   * Unregister previous service workers if the version has changed.
+   * Unregister old service workers if the version has changed.
    */
-  private _unregisterOldServiceWorkers = async (scriptURL: string) => {
+  private async _unregisterOldServiceWorkers(scriptURL: string): Promise<void> {
     const versionKey = `${scriptURL}-version`;
     // Check if we have an installed version. If we do, compare it to the current version
     // and unregister all service workers if they are different.
@@ -160,32 +150,58 @@ export class ServiceWorkerManager implements IServiceWorkerManager {
     }
 
     localStorage.setItem(versionKey, VERSION);
-  };
+  }
 
   /**
-   * Ping the Service Worker to keep it alive.
+   * Ping the service worker to keep it alive.
    */
-  private _pingServiceWorker = async (): Promise<void> => {
+  private async _pingServiceWorker(): Promise<void> {
     const response = await fetch(SW_PING_ENDPOINT);
     const text = await response.text();
     if (text === 'ok') {
       setTimeout(this._pingServiceWorker, 20000);
     }
-  };
+  }
 
   /**
-   * Set the Service Worker registration.
+   * Set the registration and emit a signal.
    */
   private _setRegistration(registration: ServiceWorkerRegistration | null) {
     this._registration = registration;
     this._registrationChanged.emit(this._registration);
   }
 
-  private _messageChannel: MessageChannel;
+  /**
+   * Handle a message received on the BroadcastChannel
+   */
+  private _onBroadcastMessage = async <T extends TDriveMethod>(
+    event: MessageEvent<{
+      data: TDriveRequest<T>;
+      browsingContextId: string;
+    }>,
+  ): Promise<void> => {
+    if (!this._broadcastChannel || !this._driveContentsProcessor) {
+      return;
+    }
+
+    const { data, browsingContextId } = event.data;
+
+    if (browsingContextId !== this._browsingContextId) {
+      // Message is not meant for us
+      return;
+    }
+
+    const response = await this._driveContentsProcessor.processDriveRequest(data);
+    this._broadcastChannel.postMessage(response);
+  };
+
   private _registration: ServiceWorkerRegistration | null = null;
   private _registrationChanged = new Signal<this, ServiceWorkerRegistration | null>(
     this,
   );
   private _ready = new PromiseDelegate<void>();
-  private _driveContentsProcessor: IDriveContentsProcessor;
+  private _broadcastChannel: BroadcastChannel;
+  private _browsingContextId: string;
+  private _contents: Contents.IManager | undefined;
+  private _driveContentsProcessor: DriveContentsProcessor | undefined;
 }
diff --git a/src/service-worker.ts b/src/service-worker.ts
index 012eb45ac2269aac5bf545ef06875940c3d888b0..d6d0131301e25bac6ff34345c0dfdddab1ec873e 100644
--- a/src/service-worker.ts
+++ b/src/service-worker.ts
@@ -9,16 +9,7 @@ const CACHE = 'precache';
 /**
  * Communication channel for drive access
  */
-let messagePort: MessagePort;
-
-const ready: Promise<void> = new Promise((resolve) => {
-  self.addEventListener('message', (event: ExtendableMessageEvent) => {
-    if (event.data && event.data.type === 'INIT_PORT') {
-      messagePort = event.ports[0];
-      resolve();
-    }
-  });
-});
+const broadcast = new BroadcastChannel('/api/drive.v1');
 
 /**
  * Whether to enable the cache
@@ -144,16 +135,14 @@ function shouldDrop(request: Request, url: URL): boolean {
  * Forward request to main using the broadcast channel
  */
 async function broadcastOne(request: Request): Promise<Response> {
-  await ready;
-
   const promise = new Promise<Response>((resolve) => {
-    messagePort.onmessage = (event) => {
+    broadcast.onmessage = (event) => {
       resolve(new Response(JSON.stringify(event.data)));
     };
   });
 
   const message = await request.json();
-  messagePort.postMessage(message);
+  broadcast.postMessage(message);
 
   return await promise;
 }
diff --git a/src/tokens.ts b/src/tokens.ts
index 84aaae1ebbf0ee5c6ac91ee60077b3e41cf9d043..13a9a73d5dd8fc2731b49bdeb76862fc86c6e579 100644
--- a/src/tokens.ts
+++ b/src/tokens.ts
@@ -1,9 +1,9 @@
-import { Contents } from '@jupyterlab/services';
-
 import { Token } from '@lumino/coreutils';
 
 import { ISignal } from '@lumino/signaling';
 
+import { Contents } from '@jupyterlab/services';
+
 import SW_URL from './service-worker?text';
 
 /**
@@ -30,6 +30,11 @@ export interface IServiceWorkerManager {
    */
   readonly enabled: boolean;
 
+  /**
+   * A unique id to identify the browsing context where the ServiceWorkerManager was instantiated.
+   */
+  readonly browsingContextId: string;
+
   /**
    * A Promise that resolves when the ServiceWorker is registered, or rejects if it cannot
    */
@@ -45,7 +50,7 @@ export namespace IServiceWorkerManager {
    */
   export interface IOptions {
     /**
-     * The JupyterLab contents manager
+     * The contents manager to use for handling drive contents requests
      */
     contents: Contents.IManager;
 
